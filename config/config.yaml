
# ========== èŠ‚ç‚¹è®¢é˜… ==========
proxy-providers:
  ap1:
    type: http
    url: "èŠ‚ç‚¹è®¢é˜…é“¾æ¥"
    interval: 86400
    path: ./providers/ap1.yaml
    health-check:
      enable: true
      interval: 600
      url: http://www.gstatic.com/generate_204

# å…¥ç«™ç›‘å¬ (å°†ä½ çš„ SS ç›‘å¬å†™åœ¨è¿™é‡Œ)
listeners:
  - name: "ss-inbound"
    type: shadowsocks
    port: 45678
    password: "GjD658hdgiajdgail12hZ78Gt1234"
    cipher: aes-256-gcm
    udp: true      

proxies:
  - { name: 'Home', type: ss, server: abc.com, port: 45678, cipher: aes-256-gcm, password: GjD658hdgiajdgail12hZ78Gt1234, udp: false }


# ========== ç­–ç•¥ç»„ ==========
proxy-groups:
  - name: "â™»ï¸ è‡ªåŠ¨é€‰æ‹©"
    type: fallback
    proxies:
      - ğŸªœ è‡ªå»ºèŠ‚ç‚¹
      - ğŸ‡ºğŸ‡¸ US
      - ğŸ‡­ğŸ‡° HK
      - ğŸ‡¯ğŸ‡µ JP
      - ğŸ‡¸ğŸ‡¬ SG    
      
  - name: "ğŸªœ è‡ªå»ºèŠ‚ç‚¹"
    type: url-test
    include-all: true
    filter: "BWG"
    
  - name: YouTube
    type: select
    proxies:
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡ºğŸ‡¸ US
      - ğŸ‡­ğŸ‡° HK
      - ğŸ‡¯ğŸ‡µ JP
      - ğŸ‡¸ğŸ‡¬ SG

  - name: AI
    type: select
    proxies:
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡ºğŸ‡¸ US
      - ğŸ‡­ğŸ‡° HK
      - ğŸ‡¯ğŸ‡µ JP
      - ğŸ‡¸ğŸ‡¬ SG

  - name: Telegram
    type: select
    proxies:
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡ºğŸ‡¸ US
      - ğŸ‡­ğŸ‡° HK
      - ğŸ‡¯ğŸ‡µ JP
      - ğŸ‡¸ğŸ‡¬ SG

  - name: Google
    type: select
    proxies:
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡ºğŸ‡¸ US
      - ğŸ‡­ğŸ‡° HK
      - ğŸ‡¯ğŸ‡µ JP
      - ğŸ‡¸ğŸ‡¬ SG

  - name: Netflix
    type: select
    proxies:
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡ºğŸ‡¸ US
      - ğŸ‡­ğŸ‡° HK
      - ğŸ‡¯ğŸ‡µ JP
      - ğŸ‡¸ğŸ‡¬ SG

  - name: Spotify
    type: select
    proxies:
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡ºğŸ‡¸ US
      - ğŸ‡­ğŸ‡° HK
      - ğŸ‡¯ğŸ‡µ JP
      - ğŸ‡¸ğŸ‡¬ SG

  - name: GlobalGame
    type: select
    proxies:
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡ºğŸ‡¸ US
      - ğŸ‡­ğŸ‡° HK
      - ğŸ‡¯ğŸ‡µ JP
      - ğŸ‡¸ğŸ‡¬ SG

  - name: GlobalMedia
    type: select
    proxies:
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - ğŸ‡ºğŸ‡¸ US
      - ğŸ‡­ğŸ‡° HK
      - ğŸ‡¯ğŸ‡µ JP
      - ğŸ‡¸ğŸ‡¬ SG

  - name: "ğŸ‡­ğŸ‡° HK"
    type: url-test
    include-all: true
    filter: "æ¸¯|HK|Hong|Hong Kong"

  - name: "ğŸ‡¯ğŸ‡µ JP"
    type: url-test
    include-all: true
    filter: "æ—¥|JP|Japan|Tokyo"

  - name: "ğŸ‡ºğŸ‡¸ US"
    type: url-test
    include-all: true
    filter: "ç¾|US|United States|America|Los Angeles"

  - name: "ğŸ‡¸ğŸ‡¬ SG"
    type: url-test
    include-all: true
    filter: "(?i)æ–°åŠ |ç‹®åŸ|SG|singap"

  - name: "æˆ‘çš„èŠ‚ç‚¹"
    type: fallback
    include-all: true
    filter: "^(?!.*(emby|å‰©ä½™|é‡ç½®|å¥—é¤|Expire|Traffic)).*$"

  - name: "Final"
    type: select
    proxies:
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©
      - DIRECT

# ========== è§„åˆ™ (Rules) ==========
rules:
  - IP-CIDR,10.10.10.0/24,Home,no-resolve
  - DOMAIN-SUFFIX,tencentscf.com,DIRECT
  - DOMAIN-SUFFIX,movie-pilot.org,â™»ï¸ è‡ªåŠ¨é€‰æ‹©
  - DOMAIN-SUFFIX,themoviedb.org,â™»ï¸ è‡ªåŠ¨é€‰æ‹©
  - DOMAIN-SUFFIX,fanart.tv,â™»ï¸ è‡ªåŠ¨é€‰æ‹©
  - DOMAIN-SUFFIX,ipify.org,â™»ï¸ è‡ªåŠ¨é€‰æ‹©
  - DOMAIN-SUFFIX,docker.com,â™»ï¸ è‡ªåŠ¨é€‰æ‹©
  - DOMAIN-SUFFIX,docker.io,â™»ï¸ è‡ªåŠ¨é€‰æ‹©
  - DOMAIN-SUFFIX,pypi.org,â™»ï¸ è‡ªåŠ¨é€‰æ‹©
  - DOMAIN-SUFFIX,ghgo.xyz,â™»ï¸ è‡ªåŠ¨é€‰æ‹©
  - DOMAIN-SUFFIX,qichiyu.com,â™»ï¸ è‡ªåŠ¨é€‰æ‹©
  - DOMAIN-SUFFIX,nanobanana.ai,AI
  - DOMAIN-SUFFIX,vme50.cyou,â™»ï¸ è‡ªåŠ¨é€‰æ‹©
  - RULE-SET,Docker,â™»ï¸ è‡ªåŠ¨é€‰æ‹©
  - RULE-SET,GitHub,â™»ï¸ è‡ªåŠ¨é€‰æ‹©
  - RULE-SET,115,DIRECT
  - RULE-SET,ChinaMedia,DIRECT
  - RULE-SET,steamCN,DIRECT
  - RULE-SET,steam,GlobalGame
  - RULE-SET,Epic,GlobalGame
  - RULE-SET,sony,GlobalGame
  - RULE-SET,Nintendo,GlobalGame
  - RULE-SET,Netflix,Netflix
  - RULE-SET,Spotify,Spotify
  - RULE-SET,openai,AI
  - RULE-SET,Gemini,AI
  - RULE-SET,youtube,YouTube
  - RULE-SET,telegram,Telegram
  - RULE-SET,google,Google
  - RULE-SET,GlobalMedia,GlobalMedia
  - RULE-SET,PrivateTracker,DIRECT
  - RULE-SET,reject,REJECT
  - RULE-SET,icloud,DIRECT
  - RULE-SET,apple,DIRECT
  - RULE-SET,direct,DIRECT
  - RULE-SET,private,DIRECT
  - RULE-SET,proxy,â™»ï¸ è‡ªåŠ¨é€‰æ‹©
  - RULE-SET,gfw,â™»ï¸ è‡ªåŠ¨é€‰æ‹©
  - RULE-SET,greatfire,â™»ï¸ è‡ªåŠ¨é€‰æ‹©
  - RULE-SET,tld-not-cn,â™»ï¸ è‡ªåŠ¨é€‰æ‹©
  - RULE-SET,lancidr,DIRECT
  - RULE-SET,cncidr,DIRECT
  - GEOIP,CN,DIRECT
  - MATCH,Final

# ========== è§„åˆ™é›†æä¾›å™¨ (Rule Providers) ==========
rule-providers:
  Epic:
    type: http
    path: ./ruleset/Epic.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Epic/Epic.yaml
    interval: 600
    behavior: classical
  sony:
    type: http
    path: ./ruleset/sony.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Sony/Sony.yaml
    interval: 600
    behavior: classical
  steam:
    type: http
    path: ./ruleset/steam.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Steam/Steam.yaml
    interval: 600
    behavior: classical
  steamCN:
    type: http
    path: ./ruleset/steamCN.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/SteamCN/SteamCN.yaml
    interval: 600
    behavior: classical
  Nintendo:
    type: http
    path: ./ruleset/Nintendo.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Nintendo/Nintendo.yaml
    interval: 600
    behavior: classical
  Netflix:
    type: http
    path: ./ruleset/Netflix.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Netflix/Netflix.yaml
    interval: 600
    behavior: classical
  youtube:
    type: http
    path: ./ruleset/YouTube.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/YouTube/YouTube.yaml
    interval: 600
    behavior: classical
  GlobalMedia:
    type: http
    path: ./ruleset/GlobalMedia.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GlobalMedia/GlobalMedia.yaml
    interval: 600
    behavior: classical
  ChinaMedia:
    type: http
    path: ./ruleset/ChinaMedia.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ChinaMedia/ChinaMedia.yaml
    interval: 600
    behavior: classical
  Spotify:
    type: http
    path: ./ruleset/Spotify.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Spotify/Spotify.yaml
    interval: 600
    behavior: classical
  openai:
    type: http
    path: ./ruleset/OpenAI.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/OpenAI/OpenAI.yaml
    interval: 600
    behavior: classical
  Gemini:
    type: http
    path: ./ruleset/Gemini.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Gemini/Gemini.yaml
    interval: 600
    behavior: classical
  telegram:
    type: http
    path: ./ruleset/Telegram.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Telegram/Telegram.yaml
    interval: 600
    behavior: classical
  google:
    type: http
    path: ./ruleset/Google.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Google/Google.yaml
    interval: 600
    behavior: classical
  115:
    type: http
    path: ./ruleset/115.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/115/115.yaml
    interval: 86400
    behavior: domain
  GitHub:
    type: http
    path: ./ruleset/GitHub.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/GitHub/GitHub.yaml
    interval: 86400
    behavior: domain
  Docker:
    type: http
    path: ./ruleset/Docker.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Docker/Docker.yaml
    interval: 86400
    behavior: domain
  PrivateTracker:
    type: http
    path: ./ruleset/PrivateTracker.yaml
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/PrivateTracker/PrivateTracker.yaml
    interval: 86400
    behavior: domain
  reject:
    type: http
    path: ./ruleset/reject.yaml
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.txt
    interval: 86400
    behavior: domain
  icloud:
    type: http
    path: ./ruleset/icloud.yaml
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/icloud.txt
    interval: 86400
    behavior: domain
  apple:
    type: http
    path: ./ruleset/apple.yaml
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/apple.txt
    interval: 86400
    behavior: domain
  proxy:
    type: http
    path: ./ruleset/proxy.yaml
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/proxy.txt
    interval: 86400
    behavior: domain
  direct:
    type: http
    path: ./ruleset/direct.yaml
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/direct.txt
    interval: 86400
    behavior: domain
  private:
    type: http
    path: ./ruleset/private.yaml
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/private.txt
    interval: 86400
    behavior: domain
  gfw:
    type: http
    path: ./ruleset/gfw.yaml
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/gfw.txt
    interval: 86400
    behavior: domain
  greatfire:
    type: http
    path: ./ruleset/greatfire.yaml
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/greatfire.txt
    interval: 86400
    behavior: domain
  tld-not-cn:
    type: http
    path: ./ruleset/tld-not-cn.yaml
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/tld-not-cn.txt
    interval: 86400
    behavior: domain
  cncidr:
    type: http
    path: ./ruleset/cncidr.yaml
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/cncidr.txt
    interval: 86400
    behavior: ipcidr
  lancidr:
    type: http
    path: ./ruleset/lancidr.yaml
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/lancidr.txt
    interval: 86400
    behavior: ipcidr
# ========== å…¨å±€è®¾ç½® ==========
port: 7890
socks-port: 7891
redir-port: 7892
mixed-port: 7893
tproxy-port: 7894
allow-lan: true
bind-address: "*"
ipv6: false

# ========== GeoX (GeoIP/GeoSite) è®¾ç½® ==========
# å¼€å¯è‡ªåŠ¨æ›´æ–°
geo-auto-update: true
# æ›´æ–°é—´éš” (å°æ—¶)
geo-update-interval: 24

# å†³å®šä½¿ç”¨ .dat è¿˜æ˜¯ .mmdb æ ¼å¼
geodata-mode: true

# è‡ªå®šä¹‰ä¸‹è½½åœ°å€
geox-url:
  geosite: "https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat"
  geoip: "https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip-lite.dat"
  mmdb: "https://gh-proxy.com/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/country-lite.mmdb"
  asn: "https://gh-proxy.com/https://github.com/xishang0128/geoip/releases/download/latest/GeoLite2-ASN.mmdb"
  
unified-delay: true
tcp-concurrent: true
log-level: info
find-process-mode: off
global-client-fingerprint: chrome
keep-alive-idle: 600
keep-alive-interval: 15
disable-keep-alive: false
profile:
  store-selected: true
  store-fake-ip: true

# ========== æ§åˆ¶é¢æ¿ ==========
external-controller: 0.0.0.0:9090
secret: "1234"
external-ui: "ui"
external-ui-url: "https://gh-proxy.com/https://github.com/Zephyruso/zashboard/archive/refs/heads/gh-pages.zip"

# ========== TUN æ¨¡å— ==========
tun:
  enable: true
  stack: system        # å·²ä¼˜åŒ–ï¼šæ¨è Linux è£¸æ ¸ä½¿ç”¨ system æ ˆï¼Œæ€§èƒ½æœ€é«˜
  dns-hijack: ["any:53", "tcp://any:53"]
  auto-route: true
  auto-redirect: true
  auto-detect-interface: true

# ========== DNS è®¾ç½® (å·²ä¼˜åŒ–åˆ†æµ) ==========
dns:
  enable: true
  listen: 0.0.0.0:1053
  ipv6: false
  respect-rules: true
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16 
  fake-ip-filter-mode: blacklist
  fake-ip-filter:
    - "+.cn"
    - "+.local"
    - "+.lan"
    - "time.*.com"
    - "+.pool.ntp.org"
    - "+.ntp.tencent.com"
    - "+.ntp1.aliyun.com"
    - "+.ntp.ntsc.ac.cn"
    - "+.cn.ntp.org.cn"

  # è§£æ DoH åŸŸåè‡ªèº«åŠç‰¹å®šè¿æ¥æ—¶ä½¿ç”¨çš„åŸºç¡€ DNS
  default-nameserver:
    - 223.5.5.5
    - 119.29.29.29
    - 1.1.1.1
    
  # è§£æä»£ç†èŠ‚ç‚¹åŸŸåæ—¶ä½¿ç”¨çš„ DNS
  proxy-server-nameserver:
    - https://dns.alidns.com/dns-query
    - https://doh.pub/dns-query
    - https://dns.cloudflare.com/dns-query

  # ã€æ ¸å¿ƒåˆ†æµç­–ç•¥ã€‘å›½å†…åŸŸåç²¾å‡†åŒ¹é…ï¼Œç›´è¿å›½å†… DoH
  nameserver-policy:
    "geosite:cn,private":
      - https://dns.alidns.com/dns-query
      - https://doh.pub/dns-query
    "+.cn,+.bilibili.com,+.alipay.com":
      - https://dns.alidns.com/dns-query

  # ã€é»˜è®¤ DNS (å…œåº•)ã€‘å›½å¤–åŸŸåèµ°è¿™é‡Œï¼Œå½»åº•é˜²æ±¡æŸ“
  nameserver:
    - https://8.8.8.8/dns-query
    - https://1.1.1.1/dns-query
    - tls://8.8.4.4:853

# ========== å—…æ¢é…ç½® ==========
sniffer:
  enable: true
  sniff:
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
    TLS:
      ports: [443, 8443]
    QUIC:
      ports: [443, 8443]
  force-domain:
    - "+.v2ex.com"
  skip-domain:
    - "+.push.apple.com"
    - "+.apple.com"
    - "+.wechat.com"
    - "+.qq.com"
    - "+.wechatapp.com"
    - "+.vivox.com"
    - "+.oray.com"
    - "+.sunlogin.net"
    - "+.msftconnecttest.com"
    - "+.msftncsi.com"
